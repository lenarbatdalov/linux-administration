# Получить кол-во каталогов
```
ls -d */ | wc -l
```

# Найти путь до файла
```
sudo find / -name 'xdebug.so'
```

#
```
sudo lshw -C memory - показать данные о ОЗУ
```

#   поиск текста в файлах
```
grep -iRl "фраза" /директория/где/искать
  -i - игнорировать регистра текста (большие или маленькие буквы)
  -R - рекурсивно искать файлы в поддиректориях
  -I - показывать названия файлов, вместо их содержимого
  -n - показать номер строки, в которой находится фраза
  -w - показать место, где слово попадается
```

```
cat source | grep Dog | uniq | sort
1. Читается файл source
2. Входные данные грепаются по подстроке "Dog"
3. Убираются дубли (в исходном файле две одинаковых строки "Dog")
4. Входные данные сортируются и выводятся на экран
```

#   Для чего нужен pipeline?
```
Для создания цепочек преобразований, позволяющих получать нужный результат с применением разных утилит одновременно
```

```
Для удаления файла, необходимо иметь права на запись в директорию, которая его содержит

Permissions
A	       B	                 C	     D
#	Permission              	rwx	  Binary
7	read, write and execute 	rwx	    111
6	read and write          	rw-	    110
5	read and execute        	r-x	    101
4	read only	                r--	    100
3	write and execute	        -wx	    011
2	write only	                -w-	    010
1	execute only	            --x	    001

drwxr-xr-x в числовой форме соответствует 755, а -rw-r--r-- — 644.
r - чтение
w - запись
x - исполнение

OCT	| BIN |	Mask	 | Права на файл                |	Права на каталог
--------------------------------------------------------------------------------------------
0	  | 000 |	- - -	 | отсутствие прав              |	отсутствие прав
1	  | 001 |	- - x	 | права на выполнение          |	доступ к файлам и их атрибутам1)
2	  | 010 |	- w -	 | права на запись              |	отсутствие прав
3	  | 011 |	- w x	 | права на запись и выполнение |	все, кроме доступа к именам файлов2)
4	  | 100 |	r - -	 | права на чтение              |	только чтение имен файлов
5	  | 101 |	r - x	 | права на чтение и выполнение |	чтение имен файлов и доступ файлам и их атрибутам3)
6	  | 110 |	r w -	 | права на чтение и запись     |	только чтение имен файлов
7	  | 111 |	r w x	 | полные права                 |	все права
```

# other
```
whoami  - ввести имя пользователя
id  - идентификаторы
ps aux  - процессы
cat /etc/passwd   - пароли
stat file.md  - подробно о файле

mkdir dirname - создать папку
touch file   - создать файл
rm file - удалить файл
mv file renamed-file  - переименовать
cp file /directory/file-copy  - копировать
ctrl+r  - поиск
```

# cat - читает данные из файла или стандартного ввода и выводит их на экран
```
cat file
-n - нумеровать строки
-s - удалить повторяющиеся пустые строки
-E - отображать символ $ в конце каждой строки

cat > test.php - записать с консоли в файл (Для завершения записи Ctrl+D)

cat file1 file2 > file3 - объединения нескольких файлов (file1 file2) в один (file3)
```

# grep -
```
Опция -w позволяет искать по слову целиком  grep -w 'seven' test.txt

по началу или концу слова:
grep '\<seven' test.txt   seventeen
grep 'seven\>' test.txt   twentyseven

в начале или конце строки
grep '^seven' test.txt    seven
grep 'seven$' test.txt    seventeen

увидеть строки в окрестности искомой
grep -C 1 twentyseven test.txt
Только снизу или сверху
grep -A 1 twentyseven test.txt
grep -B 1 twentyseven test.txt

квантификаторы, метасимволы
grep "twenty[1-4]" test.txt

строки с заглавными символами
grep "[[:upper:]]" test.txt
Плохо видно что нашли? Подсветим:
grep --colour "[[:upper:]]" test.txt

-R - рекурсивно
```

# ACCESS
# Basic
```
Устанавливаю права на папку для определенной группы и пользователя
sudo chown -R www-data:www-data .
Добавляю пользователя (себя) в группу, которой принадлежат права на папку
sudo usermod -a -G www-data $USER
Теперь разрешаю всем пользователям, входящим в группу www-data, чтение и запись в каталоги
sudo chmod -R g+rw .
```

# password
```
openssl passwd -1 -salt xyz yourpass
к примеру: 1 = $1$xyz$kscHs55VaGqy68rCXJE1G.

sudo nano /etc/shadow
имя_пользователя:пароль:::::
user:$1$xyz$kscHs55VaGqy68rCXJE1G.:18561:0:99999:7:::
```

# Common
```
list all users
cat /etc/passwd

Use the groups command to display the user’s supplementary groups:
groups www-data

How to Create a Group
sudo groupadd groupname

добавить пользователя в группу
sudo usermod -a -G wheel user

Delete a Group
sudo groupdel groupname

How to Change a User’s Primary Group
sudo usermod -g groupname username

How to Remove a User From a Group
sudo gpasswd -d username groupname
```

# Other
```
! изменения начинают действовать после рестарта сессии

создать группу
sudo groupadd myGroup

добавить в группу myGroup пользователя lenar
sudo usermod -aG myGroup lenar

посмотреть группы для пользователя
groups lenar

добавил в группу myGroup пользователя apache2
sudo usermod -aG myGroup www-data

добавил в группу www-data (apache2) себя (lenar)
sudo usermod -aG www-data lenar

назначил владельца папки пользователя(:входящего в группу)
sudo chown -R www-data:www-data folder

добавить пользователя в группу vboxsf
sudo adduser lenar vboxsf
```

# Статья
```
Основы
Вообще, когда мы говорим о каталогах или файлах, нас интересует три набора прав:

Пользовательские - касающиеся владельца файла
Групповые - права, касающиеся участников одной группы
Все остальные - разрешения для тех, кто не подходит к первым двум группам
Соответственно, каждый пользователь имеет своё уникальное имя и, как правило, принадлежит к одной или нескольким группам. Более того в одну группу может входить несколько пользователей.

Заметка: команда chmod в качестве одного из параметров принимает целочисленное значение, которое отвечает за набор прав. По ссылке вы найдете более подробную информацию по теме.

Я расскажу, как использовать chmod - команда, предназначенная для управления разрешениями (правами доступа) для работы с директориями и файлами.

Использование
chmod -ключи права путь/к/директории/файлу
Ключи
Команда chmod -R будет рекурсивно применена ко всем вложенным файлам и каталогам.

Изменение разрешений
Указать к кому применяется тот или иной набор прав вы можете при помощи следующих ключей:

u - пользователь
g - группа
o - все остальные
Добавлять и удалять права можно следующим образом:

+ - добавит права (знак плюс)
- - удалит права (знак минус)
Сами же права задаются вот так:

r - чтение
w - запись
x - выполнение
Применим все это, чтобы настроить права доступа для Apache.

Основные моменты
Apache запущен под пользователем и группой www-data
Корень сервера располагается по адресу /var/www
Первое
Изменим владельца корневого каталога сервера:

sudo chown -R www-data:www-data /var/www
Добавить пользователя к группе www-data можно следующей командой:

sudo usermod -a -G www-data username
Удалить пользователя из группы www-data можно командой:

sudo gpasswd -d username www-data
Второе
Необходимо задать соответствующие права пользователям и группам. Сначала мы полностью закроем доступ, а потом разрешим только то, что необходимо.

Для начала закроем доступ к корневому каталогу для всех кроме его владельца, а именно - www-data. Мы используем ключ -go, чтобы изменения затронули группу и всех остальных пользователей, - означает удаление прав, а rwx означает, что мы запрещаем им читать, писать и запускать файлы из этого каталога.

sudo chmod go-rwx /var/www
Чтобы проверить какие права установлены на директорию выполните в командной строке: ls -la /var/www

Затем разрешим пользователям группы www-data и всем остальным просматривать корневой каталог. Команда работает не рекурсивно. Опять таки мы используем +, чтобы добавить права, а х отвечает за право выполнять файлы.

sudo chmod go+x /var/www
Теперь изменим группу, к которой принадлежит корневой каталог, применив рекурсивный вариант команды.

sudo chgrp -R www-data /var/www
Сделаем очередной сброс прав, таким образом только один пользователь имеет доступ к каталогу и всем входящим в него файлам.

sudo chmod -R go-rwx /var/www
Теперь разрешим всем пользователям, входящим в одну группу, чтение и запись в каталоги:

sudo chmod -R g+rw /var/www
На самом деле я выдаю права записи пользователям, входящим в одну группу, которую потом использую для всех, кто может изменять код на веб сервере. Делаю я это следующим образом:

chmod -R g+rwx /var/www
Очень часто нам не требуется выполнять все эти шаги, и базовой настройки сервера вполне достаточно, но, зато на примере настройки прав для Apache мы рассмотрели возможности команды chmod.
```
